<!-- app/views/imports/new.html.erb -->
<div class="container">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <div class="card">
        <div class="card-header">
          <h1 class="h4 mb-0">Import Transactions</h1>
        </div>
        <div class="card-body">
          <% if flash[:alert] %>
            <div class="alert alert-danger"><%= flash[:alert] %></div>
          <% end %>

          <%= form_with(url: imports_path, method: :post, local: true, multipart: true) do |form| %>
            <div class="form-group mb-3">
              <%= form.label :account_id, "Select Account" %>
              <%= form.collection_select :account_id, @accounts, :id, :name,
                                         { prompt: "Select an account for these transactions" },
                                         class: "form-control" %>
            </div>

            <div class="form-group mb-4">
              <%= form.label :file, "CSV File" %>
              <%= form.file_field :file, class: "form-control", accept: ".csv" %>
              <small class="form-text text-muted">
                Upload a CSV file with your transaction data. The file should contain columns for date, description, and amount.
              </small>
            </div>

            <div class="card mb-4">
              <div class="card-header">
                <h5 class="mb-0">CSV Format Guidelines</h5>
              </div>
              <div class="card-body">
                <p>Your CSV file should have the following columns:</p>
                <ul>
                  <li><strong>Date</strong> - Transaction date (YYYY-MM-DD, MM/DD/YYYY, or DD/MM/YYYY)</li>
                  <li><strong>Description</strong> - Transaction description or merchant name</li>
                  <li><strong>Amount</strong> - Transaction amount (positive for income, negative for expenses)</li>
                </ul>
                <p>The system will try to match various common column names (e.g., "Date", "date", "Description", "description", etc.)</p>
                <p>Example CSV format:</p>
                <pre class="bg-light p-2">
Date,Description,Amount
2025-01-15,Grocery Store,-45.67
2025-01-16,Salary Deposit,1000.00
</pre>
              </div>
            </div>

            <div class="actions">
              <%= form.submit "Upload and Import", class: "btn btn-primary" %>
              <%= link_to "Cancel", transactions_path, class: "btn btn-secondary" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>