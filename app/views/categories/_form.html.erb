<!-- app/views/categories/_form.html.erb -->
<%= form_with(model: category, local: true) do |form| %>
  <% if category.errors.any? %>
    <div class="mb-4 bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded">
      <h4 class="text-lg font-medium mb-2"><%= pluralize(category.errors.count, "error") %> prohibited this category from being saved:</h4>
      <ul class="list-disc pl-5">
        <% category.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-4">
    <%= form.label :name, class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_field :name, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm", placeholder: "e.g. Groceries, Utilities" %>
  </div>

  <div class="mb-4">
    <%= form.label :description, class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_area :description, rows: 3, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm", placeholder: "Brief description of this category" %>
  </div>

  <div class="mb-6">
    <%= form.label :parent_category_id, "Parent Category (optional)", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.collection_select :parent_category_id, @parent_categories, :id, :name,
                               { include_blank: "No parent category" },
                               class: "mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md" %>
    <p class="mt-1 text-sm text-gray-500">Select a parent category if this is a subcategory</p>
  </div>

  <div class="flex space-x-3">
    <%= form.submit class: "px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
    <%= link_to "Cancel", categories_path, class: "px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
  </div>
<% end %>